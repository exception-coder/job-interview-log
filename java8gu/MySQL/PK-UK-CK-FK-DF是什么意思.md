总结标题
SQL_Constraint_Types_PK_UK_CK_FK_DF

---

## 1）10 行极简速记版（纯文本）

✔ PK=主键，唯一且非空
✔ UK=唯一键，允许单空值
📌 CK=check 约束控制取值
➤ FK=外键保证引用一致性
🔥 DF=默认值约束自动填充
⚠️ 约束是列级/表级数据规则
🧠 PK+FK 常构成关系模型骨架
📈 UK 可提升查询性能（索引化）
🚀 CK 用于快速防御脏数据
📌 DF 减少应用层判空逻辑

---

## 2）折叠式知识卡片版（Markdown）

<details>
<summary>① 定义</summary>

* **PK（Primary Key）**：主键约束，保证记录唯一性，并天然建立唯一索引；不可为 NULL。
* **UK（Unique Key）**：唯一性约束，可为 NULL（不同数据库中 NULL 行为略异）。
* **CK（Check Constraint）**：检查约束，限定列值范围（如 age > 0）。
* **FK（Foreign Key）**：外键约束，保证引用完整性，父表变化可能触发级联行为。
* **DF（Default）**：默认值约束，列未赋值时使用默认值。

</details>

<details>
<summary>② 原理</summary>

* PK/UK 都通过索引来实现唯一性校验。
* FK 会在写入/更新时进行父表存在性检查。
* CK 在写入前校验表达式结果是否满足约束条件。
* DF 在插入时由引擎填充值，不需要应用层干预。

</details>

<details>
<summary>③ 关键点</summary>

* PK 是表的逻辑唯一标识，必须唯一且非空。
* UK 非必然为主键，但保证数据维度的去重能力。
* CK 用于业务规则强校验，能减少脏数据进入数据库。
* FK 可能影响写入性能，大并发系统常用“软外键”（业务校验）。
* DF 对创建时间、状态字段尤其适用，减少应用层重复逻辑。

</details>

<details>
<summary>④ 扩展知识</summary>

* 大型系统常禁用 FK，并在应用侧维护引用一致性。
* UK 可用于约束邮箱、手机号等唯一字段。
* CK 在 MySQL 8.0 之前不完全支持，8.0+ 才正式实现。
* DF 多用于审计字段（create_time、status 等）。

</details>

---

## 3）面试官追问（Q&A）

**问：PK 和 UK 的主要区别是什么？**
答：PK 要求非空且唯一，一个表只有一个；UK 可多个且允许 NULL。

**问：为什么大型分布式系统经常禁用 FK？**
答：外键会在写路径引入强一致性校验，影响性能和扩展性；分布式环境也难以跨库维护 FK。

**问：CK 约束能替代应用层校验吗？**
答：不能完全替代，但能提供底线保护，防止绕过应用层导致脏数据写入。

**问：DF 约束在审计字段中有什么优势？**
答：可自动补充创建时间、默认状态等信息，减少应用逻辑分支。

**问：PK 一定要使用自增列吗？**
答：不是。可使用业务主键、UUID、雪花算法 ID 等；关键是唯一性与稳定性。

---

## 4）示意图（ASCII）

```
        SQL 表约束关系概览

+-----------------------------+
|           Table             |
+-----------------------------+
| PK | -> 唯一标识记录        |
| UK | -> 限制唯一但可空      |
| CK | -> 校验列取值规则      |
| FK | -> 关联父表确保一致性  |
| DF | -> 插入时自动填默认值  |
+-----------------------------+
```

```
外键关联示意

 Parent Table (PK)
        |
        v
 Child Table (FK references PK)
```

---

（总结完毕）
